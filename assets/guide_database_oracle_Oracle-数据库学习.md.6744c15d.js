import{_ as s,o as a,c as l,Q as p}from"./chunks/framework.8153c8a6.js";const u=JSON.parse('{"title":"Oracle数据库创建","description":"","frontmatter":{"title":"Oracle数据库创建","date":"2019-10-15T08:48:16.000Z"},"headers":[],"relativePath":"guide/database/oracle/Oracle-数据库学习.md","filePath":"guide/database/oracle/Oracle-数据库学习.md"}'),n={name:"guide/database/oracle/Oracle-数据库学习.md"},o=p(`<p>用户、表空间、schema</p><ul><li><p>用户，用户是用来连接和访问数据库</p></li><li><p>表空间，数据存储的实际物理空间 (理解方面:一个表中的数据可能是存在几个表空间中的）</p><p>注：临时表空间是用来 做排序操作，查询视图等操作的临时运行空间，运行完成后自动清理临时对象</p></li><li><p>schema</p><p>Oracle中，创建一个用户默认创建一个缺省的同名schema，一个用户对应一个schema</p><p>理解：创建一个schema就是创建一个对象，该对象将 某些表或者视图关联起来，方便在使用时直接使用schema就能找到</p></li><li><p>创建用户</p></li></ul><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">create</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">user</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">用户名</span><span style="color:#E1E4E8;"> identified </span><span style="color:#F97583;">by</span><span style="color:#E1E4E8;"> 密码 </span><span style="color:#F97583;">default</span><span style="color:#E1E4E8;"> tablespace 表空间名;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">create</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">user</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">用户名</span><span style="color:#24292E;"> identified </span><span style="color:#D73A49;">by</span><span style="color:#24292E;"> 密码 </span><span style="color:#D73A49;">default</span><span style="color:#24292E;"> tablespace 表空间名;</span></span></code></pre></div><p>eg：create user wpuse identified by qwer1111;可以指定表空间，也可以不指定表空间</p><ul><li>删除用户</li></ul><div class="language-SQL vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">SQL</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">drop</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">user</span><span style="color:#E1E4E8;"> 用户名 cascade;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">drop</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">user</span><span style="color:#24292E;"> 用户名 cascade;</span></span></code></pre></div><ul><li>给用户授权</li></ul><p>语法：GRANT 权限1,权限2,权限3 on 表名 to 用户名;</p><div class="language-SQL vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">SQL</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">GRANT</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">CONNECT</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">RESOURCE</span><span style="color:#E1E4E8;">, DBA </span><span style="color:#F97583;">TO</span><span style="color:#E1E4E8;"> 用户名;    </span><span style="color:#6A737D;">--- 授登录权限</span></span>
<span class="line"><span style="color:#F97583;">GRANT</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">SELECT</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">INSERT</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">UPDATE</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">DELETE</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">ON</span><span style="color:#E1E4E8;"> 表名 </span><span style="color:#F97583;">TO</span><span style="color:#E1E4E8;"> 用户名;  </span><span style="color:#6A737D;">--- 授特定表CIUD权限</span></span>
<span class="line"><span style="color:#F97583;">GRANT</span><span style="color:#E1E4E8;"> ALL </span><span style="color:#F97583;">ON</span><span style="color:#E1E4E8;"> 表名 </span><span style="color:#F97583;">TO</span><span style="color:#E1E4E8;"> 用户名;    </span><span style="color:#6A737D;">--- 授特定表所有权限</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">GRANT</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">CONNECT</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">RESOURCE</span><span style="color:#24292E;">, DBA </span><span style="color:#D73A49;">TO</span><span style="color:#24292E;"> 用户名;    </span><span style="color:#6A737D;">--- 授登录权限</span></span>
<span class="line"><span style="color:#D73A49;">GRANT</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">SELECT</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">INSERT</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">UPDATE</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">DELETE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">ON</span><span style="color:#24292E;"> 表名 </span><span style="color:#D73A49;">TO</span><span style="color:#24292E;"> 用户名;  </span><span style="color:#6A737D;">--- 授特定表CIUD权限</span></span>
<span class="line"><span style="color:#D73A49;">GRANT</span><span style="color:#24292E;"> ALL </span><span style="color:#D73A49;">ON</span><span style="color:#24292E;"> 表名 </span><span style="color:#D73A49;">TO</span><span style="color:#24292E;"> 用户名;    </span><span style="color:#6A737D;">--- 授特定表所有权限</span></span></code></pre></div><ul><li>撤消用户授权</li></ul><p>语法：REVOKE 权限1,权限2,权限3 on 表名 to 用户名;</p><div class="language-SQL vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">SQL</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">REVOKE</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">CONNECT</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">RESOURCE</span><span style="color:#E1E4E8;">, DBA </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> 用户名;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">REVOKE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">CONNECT</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">RESOURCE</span><span style="color:#24292E;">, DBA </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> 用户名;</span></span></code></pre></div><ul><li>查询schema (即查询所有的用户)(sys在Oracle中有最大权限)</li></ul><div class="language-SQL vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">SQL</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">sys</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">dba_users</span><span style="color:#E1E4E8;">;   </span><span style="color:#6A737D;">--- 查询所有的用户</span></span>
<span class="line"><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">sys</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">uesr_users</span><span style="color:#E1E4E8;">;   </span><span style="color:#6A737D;">--- 查询当前用户的信息</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">select</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">sys</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">dba_users</span><span style="color:#24292E;">;   </span><span style="color:#6A737D;">--- 查询所有的用户</span></span>
<span class="line"><span style="color:#D73A49;">select</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">sys</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">uesr_users</span><span style="color:#24292E;">;   </span><span style="color:#6A737D;">--- 查询当前用户的信息</span></span></code></pre></div><p>default_tablespace 默认表空间 temporary_tablespace 临时表空间</p><ul><li>创建表空间</li></ul><div class="language-SQL vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">SQL</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">create</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">tablespace</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">表空间名</span><span style="color:#E1E4E8;"> datafile 表空间位置(带引号) </span><span style="color:#F97583;">size</span><span style="color:#E1E4E8;"> 表空间大小;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">create</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">tablespace</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">表空间名</span><span style="color:#24292E;"> datafile 表空间位置(带引号) </span><span style="color:#D73A49;">size</span><span style="color:#24292E;"> 表空间大小;</span></span></code></pre></div><p>eg：create tablespace mytablespace datafile &#39;d:\\ztwork\\oracle\\oradata\\orcl\\mytablespace.dbf&#39; size 10m;</p><ul><li>删除表空间</li></ul><div class="language-SQL vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">SQL</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">drop</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">table</span><span style="color:#E1E4E8;">space 表空间名;  </span><span style="color:#6A737D;">--- 删除空的表空间，但是不包含数据文件</span></span>
<span class="line"><span style="color:#F97583;">drop</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">table</span><span style="color:#E1E4E8;">space 表空间名 including contents;  </span><span style="color:#6A737D;">--- 若表空间不为空，需加上 contents</span></span>
<span class="line"><span style="color:#F97583;">drop</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">table</span><span style="color:#E1E4E8;">space 表空间名 including datafiles;  </span><span style="color:#6A737D;">--- 若还要删除数据文件，需加上 datafiles</span></span>
<span class="line"><span style="color:#F97583;">drop</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">table</span><span style="color:#E1E4E8;">space 表空间名 including contents </span><span style="color:#F97583;">and</span><span style="color:#E1E4E8;"> datafiles; </span><span style="color:#6A737D;">--- 删除非空表空间以及数据文件</span></span>
<span class="line"><span style="color:#F97583;">drop</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">table</span><span style="color:#E1E4E8;">space 表空间名 including contents </span><span style="color:#F97583;">and</span><span style="color:#E1E4E8;"> datafiles CASCADE CONSTRAINTS;  </span><span style="color:#6A737D;">--- 若该表空间存在 其它表空间表的 外键约束则需加上 CASCADE CONSTRAINTS</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">drop</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">table</span><span style="color:#24292E;">space 表空间名;  </span><span style="color:#6A737D;">--- 删除空的表空间，但是不包含数据文件</span></span>
<span class="line"><span style="color:#D73A49;">drop</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">table</span><span style="color:#24292E;">space 表空间名 including contents;  </span><span style="color:#6A737D;">--- 若表空间不为空，需加上 contents</span></span>
<span class="line"><span style="color:#D73A49;">drop</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">table</span><span style="color:#24292E;">space 表空间名 including datafiles;  </span><span style="color:#6A737D;">--- 若还要删除数据文件，需加上 datafiles</span></span>
<span class="line"><span style="color:#D73A49;">drop</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">table</span><span style="color:#24292E;">space 表空间名 including contents </span><span style="color:#D73A49;">and</span><span style="color:#24292E;"> datafiles; </span><span style="color:#6A737D;">--- 删除非空表空间以及数据文件</span></span>
<span class="line"><span style="color:#D73A49;">drop</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">table</span><span style="color:#24292E;">space 表空间名 including contents </span><span style="color:#D73A49;">and</span><span style="color:#24292E;"> datafiles CASCADE CONSTRAINTS;  </span><span style="color:#6A737D;">--- 若该表空间存在 其它表空间表的 外键约束则需加上 CASCADE CONSTRAINTS</span></span></code></pre></div><ul><li>查询表空间</li></ul><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> tablespace_name </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">sys</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">dba_tablespaces</span><span style="color:#E1E4E8;">; </span><span style="color:#6A737D;">--- 查询所有的表空间</span></span>
<span class="line"><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> tablespace_name </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">sys</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">user_tablespaces</span><span style="color:#E1E4E8;">; </span><span style="color:#6A737D;">---</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">select</span><span style="color:#24292E;"> tablespace_name </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">sys</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">dba_tablespaces</span><span style="color:#24292E;">; </span><span style="color:#6A737D;">--- 查询所有的表空间</span></span>
<span class="line"><span style="color:#D73A49;">select</span><span style="color:#24292E;"> tablespace_name </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">sys</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">user_tablespaces</span><span style="color:#24292E;">; </span><span style="color:#6A737D;">---</span></span></code></pre></div><ul><li>查询表空间详细信息(与数据文件的关系)</li></ul><div class="language-SQL vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">SQL</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">Select</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">FROM</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">sys</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">dba_data_files</span><span style="color:#E1E4E8;">;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">Select</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">FROM</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">sys</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">dba_data_files</span><span style="color:#24292E;">;</span></span></code></pre></div><p>FILE_NAME 表空间物理存储位置，TABLESPACE_NAME 表空间名称，BYTES 表空间大小</p><p>AUTOEXTENSIBLE 自动增长，MAXBYTES 为重新定义的大小</p><ul><li>查询临时数据文件表空间详细信息</li></ul><div class="language-SQL vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">SQL</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">sys</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">dba_temp_files</span><span style="color:#E1E4E8;">;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">select</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">sys</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">dba_temp_files</span><span style="color:#24292E;">;</span></span></code></pre></div><p><strong>sqlload的使用</strong></p><ul><li>需要导入的文件、ctl文件(做配置导入数据与表字段对应关系)</li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">sqlldr 用户/密码@ip:端口/数据库的sid control=ctl执行的文件名 log=日志打印的文件名</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">sqlldr 用户/密码@ip:端口/数据库的sid control=ctl执行的文件名 log=日志打印的文件名</span></span></code></pre></div><p>eg：sqlldr wpuse/qwer1111@127.0.0.1:1521/orcl control=sqlload.ctl log=sqlload.out</p><p>eg：</p><p>sqlldr afa/afa@172.31.231.169:1521/orcl control=sqlload_tro.ctl log=sqlload.out</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">LOAD DATA</span></span>
<span class="line"><span style="color:#e1e4e8;">infile &#39;文件名地址&#39;</span></span>
<span class="line"><span style="color:#e1e4e8;">into table 导入的表名</span></span>
<span class="line"><span style="color:#e1e4e8;">(</span></span>
<span class="line"><span style="color:#e1e4e8;">字段名1(即列名) terminated by 分割方式(whitespace表示空格),</span></span>
<span class="line"><span style="color:#e1e4e8;">字段名2(即列名) terminated by whitespace,</span></span>
<span class="line"><span style="color:#e1e4e8;">字段名3(即列名) terminated by whitespace,</span></span>
<span class="line"><span style="color:#e1e4e8;">字段名4(即列名) terminated by whitespace</span></span>
<span class="line"><span style="color:#e1e4e8;">)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">LOAD DATA</span></span>
<span class="line"><span style="color:#24292e;">infile &#39;文件名地址&#39;</span></span>
<span class="line"><span style="color:#24292e;">into table 导入的表名</span></span>
<span class="line"><span style="color:#24292e;">(</span></span>
<span class="line"><span style="color:#24292e;">字段名1(即列名) terminated by 分割方式(whitespace表示空格),</span></span>
<span class="line"><span style="color:#24292e;">字段名2(即列名) terminated by whitespace,</span></span>
<span class="line"><span style="color:#24292e;">字段名3(即列名) terminated by whitespace,</span></span>
<span class="line"><span style="color:#24292e;">字段名4(即列名) terminated by whitespace</span></span>
<span class="line"><span style="color:#24292e;">)</span></span></code></pre></div><p>eg：</p><p>LOAD DATA infile &#39;F:\\1111111.txt&#39; into table firsttable ( id terminated by whitespace, name terminated by whitespace, phone terminated by whitespace, message terminated by whitespace )</p><p><strong>Oracle常用命令</strong></p><ul><li><p>sqlplus 连接Oracle</p></li><li><p>connect/ as sysdba 获取管理员权限</p><p>shutdown immediate 关闭数据库</p><p>startup 开启数据库</p></li><li><p>lsnrctl 进入监听器后台管理</p></li><li><p>lsnrctl start 启动监听器</p></li><li><p>lsnrctl stop 关闭监听器</p></li><li><p>lsnrctl status 查看监听器状态</p></li></ul><p>注：该空闲例程用来在Oracle已经关闭，用system等用户无法登录的情况</p><p>sqlplus 连接空闲例程</p><p>用户名：sys as sysdba</p><p>密码：空</p><p><strong>Oracle连接出现问题</strong></p><ul><li>本地能连接，其它客户端无法连接</li></ul><p>解决办法：在服务端host文件中创建 本地ip对应的域名，监听文件中使用自己创建的域名，当开启监听的时候就会跳过dns解析，其它客户端就能直接连上了</p><ul><li>出现用户被锁定</li></ul><p>解决办法：使用 sys as sysdba 登录sql，alter user 用户名 account unlock;</p><ul><li>出现身份证明检索失败</li></ul><p>解决办法：修改服务端 sqlnet.ora 文件(修改认证方式 NTS为NONE)</p><p>SQLNET.AUTHENTICATION_SERVICES= (NTS)</p><p><strong>数据库查询</strong></p><ul><li>查询某个表的某个字段一样的数据 表名:example_table 列名:example_row</li></ul><div class="language-SQL vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">SQL</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> example_table a </span><span style="color:#F97583;">where</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">exists</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> example_table </span><span style="color:#F97583;">where</span><span style="color:#E1E4E8;"> example_row </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">a</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">example_row</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">group by</span><span style="color:#E1E4E8;"> example_row </span><span style="color:#F97583;">having</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">count</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;">)</span><span style="color:#F97583;">&gt;=</span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">select</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> example_table a </span><span style="color:#D73A49;">where</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">exists</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#D73A49;">select</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> example_table </span><span style="color:#D73A49;">where</span><span style="color:#24292E;"> example_row </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">a</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">example_row</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#D73A49;">group by</span><span style="color:#24292E;"> example_row </span><span style="color:#D73A49;">having</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">count</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">*</span><span style="color:#24292E;">)</span><span style="color:#D73A49;">&gt;=</span><span style="color:#005CC5;">2</span><span style="color:#24292E;">)</span></span></code></pre></div><ul><li>查询两个表的同名字段的所有枚举值(有点像group by的枚举,只不过是两个表)</li></ul><div class="language-SQL vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">SQL</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> same_rowname </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> example_table1</span></span>
<span class="line"><span style="color:#F97583;">union</span></span>
<span class="line"><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> same_rowname </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> example_table2</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">select</span><span style="color:#24292E;"> same_rowname </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> example_table1</span></span>
<span class="line"><span style="color:#D73A49;">union</span></span>
<span class="line"><span style="color:#D73A49;">select</span><span style="color:#24292E;"> same_rowname </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> example_table2</span></span></code></pre></div><p>注：查询出的分别两个表的 same_rowname字段枚举值都不允许出现重复，然后合在一起</p><div class="language-SQL vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">SQL</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> same_rowname </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> example_table1</span></span>
<span class="line"><span style="color:#F97583;">union ALL</span></span>
<span class="line"><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> same_rowname </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> example_table2</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">select</span><span style="color:#24292E;"> same_rowname </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> example_table1</span></span>
<span class="line"><span style="color:#D73A49;">union ALL</span></span>
<span class="line"><span style="color:#D73A49;">select</span><span style="color:#24292E;"> same_rowname </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> example_table2</span></span></code></pre></div><p>注：查询出的 same_rowname允许出现重复,且是 union all前面查询的表 same_rowname可以重复，后面查询的表出现的same_rowname字段枚举值不允许重复</p><ul><li>查询目前数据库的连接情况</li></ul><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> OSUSER,MACHINE </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> v$</span><span style="color:#F97583;">session</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">where</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">status=</span><span style="color:#9ECBFF;">&#39;ACTIVE&#39;</span><span style="color:#E1E4E8;">;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">select</span><span style="color:#24292E;"> OSUSER,MACHINE </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> v$</span><span style="color:#D73A49;">session</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">where</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">status=</span><span style="color:#032F62;">&#39;ACTIVE&#39;</span><span style="color:#24292E;">;</span></span></code></pre></div><p><strong>表结构</strong></p><ul><li>VARCHAR2(4 CHAR)与VARCHAR2(4)区别</li></ul><p>VARCHAR2(4)等同于VARCHAR2(4 BYTE)，即VARCHAR2(4 CHAR) 为 VARCHAR2(4)的4倍大小</p><p>超出打开游标的最大数</p><p>出现这种情况只有两种可能</p><p>一就是游标数真的很少，可以用SQL查询下。 二、就是重复创建没有及时关闭，例如再循环中创建却没有再循环中关闭，建议检查下代码。</p>`,67),e=[o];function t(c,r,y,E,i,d){return a(),l("div",null,e)}const g=s(n,[["render",t]]);export{u as __pageData,g as default};
