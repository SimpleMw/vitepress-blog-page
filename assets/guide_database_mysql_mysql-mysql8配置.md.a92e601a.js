import{_ as e,C as t,o as c,c as r,H as a,w as p,Q as o,k as s,a as n}from"./chunks/framework.8153c8a6.js";const k=JSON.parse('{"title":"mysql8 免安装配置","description":"","frontmatter":{"title":"mysql8 免安装配置","date":"2020-10-14T08:48:16.000Z"},"headers":[],"relativePath":"guide/database/mysql/mysql-mysql8配置.md","filePath":"guide/database/mysql/mysql-mysql8配置.md"}'),y={name:"guide/database/mysql/mysql-mysql8配置.md"},i=o(`<ul><li><p>解压压缩包</p></li><li><p>配置环境变量 path中加入mysql的bin路径</p></li><li><p>myql8解压根路径下新建 my.ini文件,写入以下(my.ini为配置文件)，其中mysql的安装路径以及数据库的数据存放路径要修改相应的位置，若以前解压目录下存在data文件夹，可以删除</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">[mysql]</span></span>
<span class="line"><span style="color:#e1e4e8;"># 设置mysql客户端默认字符集</span></span>
<span class="line"><span style="color:#e1e4e8;">default-character-set=utf8</span></span>
<span class="line"><span style="color:#e1e4e8;"> </span></span>
<span class="line"><span style="color:#e1e4e8;">[mysqld]</span></span>
<span class="line"><span style="color:#e1e4e8;"># 绑定IPv4</span></span>
<span class="line"><span style="color:#e1e4e8;">bind-address=0.0.0.0</span></span>
<span class="line"><span style="color:#e1e4e8;"># 设置端口号</span></span>
<span class="line"><span style="color:#e1e4e8;">port=3306</span></span>
<span class="line"><span style="color:#e1e4e8;"># 设置mysql的安装目录，即解压目录</span></span>
<span class="line"><span style="color:#e1e4e8;">basedir=D:\\\\uwork\\\\mysql\\\\mysql-8.0.19-winx64</span></span>
<span class="line"><span style="color:#e1e4e8;"># 设置数据库的数据存放目录</span></span>
<span class="line"><span style="color:#e1e4e8;">datadir=D:\\\\uwork\\\\mysql\\\\mysql-8.0.19-winx64\\\\data</span></span>
<span class="line"><span style="color:#e1e4e8;"># 设置允许最大连接数</span></span>
<span class="line"><span style="color:#e1e4e8;">max_connections=200</span></span>
<span class="line"><span style="color:#e1e4e8;"># 设置允许连接失败次数</span></span>
<span class="line"><span style="color:#e1e4e8;">max_connect_errors=10</span></span>
<span class="line"><span style="color:#e1e4e8;"># 设置服务端的默认字符集</span></span>
<span class="line"><span style="color:#e1e4e8;">character-set-server=utf8</span></span>
<span class="line"><span style="color:#e1e4e8;"># 创建表使用的默认存储引擎</span></span>
<span class="line"><span style="color:#e1e4e8;">default-storage-engine=INNODB</span></span>
<span class="line"><span style="color:#e1e4e8;"># 使用“mysql_native_password”插件认证</span></span>
<span class="line"><span style="color:#e1e4e8;">default_authentication_plugin=mysql_native_password</span></span>
<span class="line"><span style="color:#e1e4e8;"># 设置只读属性</span></span>
<span class="line"><span style="color:#e1e4e8;">read-only=0</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">[mysql]</span></span>
<span class="line"><span style="color:#24292e;"># 设置mysql客户端默认字符集</span></span>
<span class="line"><span style="color:#24292e;">default-character-set=utf8</span></span>
<span class="line"><span style="color:#24292e;"> </span></span>
<span class="line"><span style="color:#24292e;">[mysqld]</span></span>
<span class="line"><span style="color:#24292e;"># 绑定IPv4</span></span>
<span class="line"><span style="color:#24292e;">bind-address=0.0.0.0</span></span>
<span class="line"><span style="color:#24292e;"># 设置端口号</span></span>
<span class="line"><span style="color:#24292e;">port=3306</span></span>
<span class="line"><span style="color:#24292e;"># 设置mysql的安装目录，即解压目录</span></span>
<span class="line"><span style="color:#24292e;">basedir=D:\\\\uwork\\\\mysql\\\\mysql-8.0.19-winx64</span></span>
<span class="line"><span style="color:#24292e;"># 设置数据库的数据存放目录</span></span>
<span class="line"><span style="color:#24292e;">datadir=D:\\\\uwork\\\\mysql\\\\mysql-8.0.19-winx64\\\\data</span></span>
<span class="line"><span style="color:#24292e;"># 设置允许最大连接数</span></span>
<span class="line"><span style="color:#24292e;">max_connections=200</span></span>
<span class="line"><span style="color:#24292e;"># 设置允许连接失败次数</span></span>
<span class="line"><span style="color:#24292e;">max_connect_errors=10</span></span>
<span class="line"><span style="color:#24292e;"># 设置服务端的默认字符集</span></span>
<span class="line"><span style="color:#24292e;">character-set-server=utf8</span></span>
<span class="line"><span style="color:#24292e;"># 创建表使用的默认存储引擎</span></span>
<span class="line"><span style="color:#24292e;">default-storage-engine=INNODB</span></span>
<span class="line"><span style="color:#24292e;"># 使用“mysql_native_password”插件认证</span></span>
<span class="line"><span style="color:#24292e;">default_authentication_plugin=mysql_native_password</span></span>
<span class="line"><span style="color:#24292e;"># 设置只读属性</span></span>
<span class="line"><span style="color:#24292e;">read-only=0</span></span></code></pre></div></li><li><p>初始化mysql <strong>mysqld --initialize --console</strong> 等待初始化完成，此时会自动创建root用户</p><p>日志中显示为 root@localhost：一串随机密码 可以记下随机密码等会登录</p><p>该操作完成后，根目录下会存在data文件夹</p></li><li><p>安装mysql服务 <strong>mysqld --install mysql --defaults-file=&quot;D:\\uwork\\mysql\\mysql-8.0.19-winx64\\my.ini&quot;</strong></p><p>注：报错 Install/Remove of the Service Denied! 原因为cmd未以管理员运行</p><p>该操作是创建mysql服务在windows的服务中</p><p>卸载服务 <strong>mysqld --remove mysql</strong></p></li><li><p>启动服务</p><ul><li>第一种 在windows的服务中 找到 mysql 点启动</li><li>第二种 cmd中输入 <strong>net start mysql</strong> <strong>(</strong> <strong>net stop mysql 是关闭服务</strong> <strong>)</strong></li></ul></li><li><p>登录mysql</p><p><strong>mysql -u root -p</strong></p><p>提示输入 password 则输入刚才记下的 密码，成功则进行下面修改密码，失败则操作下下步</p></li></ul><hr>`,2),E=s("ul",null,[s("li",null,[n("执行"),s("strong",null,'mysqld --defaults-file="D:\\uwork\\mysql\\mysql-8.0.19-winx64\\my.ini" --initialize-insecure')]),s("li",null,[n("安装服务后，"),s("strong",null,"net start mysql")])],-1),d=s("hr",null,null,-1),F=s("ul",null,[s("li",null,[s("p",null,"修改user密码"),s("p",null,[s("strong",null,"ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY '新密码';")]),s("p",null,"刷新权限"),s("p",null,[s("strong",null,"flush privileges;")])]),s("li",null,[s("p",null,"退出重新使用新密码登录，大功告成")])],-1),u=s("hr",null,null,-1),m=o("<p>输入记下的随机密码报错，则一般是密码错误(或者其它玩意)</p><ul><li><p>解决办法，免密登录后然后删除密码</p></li><li><p>关闭mysql服务 <strong>net stop mysql</strong></p></li><li><p>在bin目录cmd下 输入 <strong>mysqld --console --skip-grant-tables --shared-memory</strong> ，输入成功后不管它</p></li><li><p>新建cmd窗口 输入<strong>mysql</strong> 登录数据库 ,然后输入 <strong>use mysql</strong> 连接数据库</p></li><li><p>(这里开始就是操作数据库了,后面都加分号)输入 <strong>show tables;</strong> 显示所有的表</p><ul><li>（查询语句，查询user表，authentication_string 就是密码列名）</li></ul><p>select user,host, authentication_string from user;</p><ul><li>（修改密码为空）</li></ul><p>update mysql.user set authentication_string = &#39;&#39; where user = &#39;root&#39; and host = &#39;localhost&#39;;</p></li></ul><p>修改成功后有 query ok字样</p><ul><li><strong>exit</strong> 退出数据库连接，关闭第一个cmd窗口</li><li>cmd窗口中 重启服务 <strong>net start mysql</strong> 然后 <strong>mysql -u root -p</strong> ，输入密码时直接回车就登录进去了</li><li>最后按上面步骤修改密码</li></ul><hr>",5),_=o(`<ul><li>创建用户</li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">create</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">user</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">canal</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">identified</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">by</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;canal&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#B392F0;">update</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">mysql.user</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">set</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">authentication_string</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">where</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">user</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;canal&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">and</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">host</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;localhost&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#B392F0;">ALTER</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">USER</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;canal&#39;@&#39;localhost&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">IDENTIFIED</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">WITH</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">mysql_native_password</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">BY</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;123456&#39;</span><span style="color:#E1E4E8;">;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">create</span><span style="color:#24292E;"> </span><span style="color:#032F62;">user</span><span style="color:#24292E;"> </span><span style="color:#032F62;">canal</span><span style="color:#24292E;"> </span><span style="color:#032F62;">identified</span><span style="color:#24292E;"> </span><span style="color:#032F62;">by</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;canal&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#6F42C1;">update</span><span style="color:#24292E;"> </span><span style="color:#032F62;">mysql.user</span><span style="color:#24292E;"> </span><span style="color:#032F62;">set</span><span style="color:#24292E;"> </span><span style="color:#032F62;">authentication_string</span><span style="color:#24292E;"> </span><span style="color:#032F62;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;&#39;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">where</span><span style="color:#24292E;"> </span><span style="color:#032F62;">user</span><span style="color:#24292E;"> </span><span style="color:#032F62;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;canal&#39;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">and</span><span style="color:#24292E;"> </span><span style="color:#032F62;">host</span><span style="color:#24292E;"> </span><span style="color:#032F62;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;localhost&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#6F42C1;">ALTER</span><span style="color:#24292E;"> </span><span style="color:#032F62;">USER</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;canal&#39;@&#39;localhost&#39;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">IDENTIFIED</span><span style="color:#24292E;"> </span><span style="color:#032F62;">WITH</span><span style="color:#24292E;"> </span><span style="color:#032F62;">mysql_native_password</span><span style="color:#24292E;"> </span><span style="color:#032F62;">BY</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;123456&#39;</span><span style="color:#24292E;">;</span></span></code></pre></div><ul><li>授权</li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">grant</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">select,replication</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">slave,replication</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">client</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">on</span><span style="color:#79B8FF;">*</span><span style="color:#9ECBFF;">.</span><span style="color:#79B8FF;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">to</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;canal&#39;@&#39;%&#39;</span><span style="color:#E1E4E8;">;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">grant</span><span style="color:#24292E;"> </span><span style="color:#032F62;">select,replication</span><span style="color:#24292E;"> </span><span style="color:#032F62;">slave,replication</span><span style="color:#24292E;"> </span><span style="color:#032F62;">client</span><span style="color:#24292E;"> </span><span style="color:#032F62;">on</span><span style="color:#005CC5;">*</span><span style="color:#032F62;">.</span><span style="color:#005CC5;">*</span><span style="color:#24292E;"> </span><span style="color:#032F62;">to</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;canal&#39;@&#39;%&#39;</span><span style="color:#24292E;">;</span></span></code></pre></div><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">grant</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">all</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">privileges</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">on</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">*</span><span style="color:#9ECBFF;">.</span><span style="color:#79B8FF;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">to</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;canal&#39;@&#39;%&#39;</span><span style="color:#E1E4E8;">;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">grant</span><span style="color:#24292E;"> </span><span style="color:#032F62;">all</span><span style="color:#24292E;"> </span><span style="color:#032F62;">privileges</span><span style="color:#24292E;"> </span><span style="color:#032F62;">on</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">*</span><span style="color:#032F62;">.</span><span style="color:#005CC5;">*</span><span style="color:#24292E;"> </span><span style="color:#032F62;">to</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;canal&#39;@&#39;%&#39;</span><span style="color:#24292E;">;</span></span></code></pre></div><ul><li>刷新权限</li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">flush</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">privileges</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">flush</span><span style="color:#24292E;"> </span><span style="color:#032F62;">privileges</span></span></code></pre></div>`,7);function g(h,C,q,B,v,f){const l=t("font");return c(),r("div",null,[i,a(l,{color:"red"},{default:p(()=>[n("初始化失败")]),_:1}),E,d,a(l,{color:"red",size:"4"},{default:p(()=>[n("登录正常改密")]),_:1}),F,u,a(l,{color:"red",size:"4"},{default:p(()=>[n("密码输入错误解决")]),_:1}),m,a(l,{color:"red"},{default:p(()=>[n("创建用户")]),_:1}),_])}const w=e(y,[["render",g]]);export{k as __pageData,w as default};
